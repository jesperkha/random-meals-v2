<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="./css/main.css" />
		<script src="./requests.js"></script>
		<title>RandomMeals</title>
	</head>
	<body>
		<h1>Get random meal</h1>

		<!-- Enthicity select -->
		<p>region</p>
		<select name="" id="select-region">
			<option value="">Any</option>
		</select>

		<br /><br />

		<!-- Meal select -->
		<p>meal</p>
		<select name="" id="select-meal">
			<option value="">Any</option>
		</select>

		<br /><br />

		<!-- Extra options -->
		<p>options</p>
		<div id="options"></div>

		<br /><br />

		<button onclick="requestRecipe();">Send request</button>

		<br /><br />

		<pre id="content"></pre>
	</body>

	<script defer>
		window.onload = async () => {
			if (localStorage.getItem("view") == "recipe") {
				window.location = "./recipe.html";
			}
			localStorage.setItem("view", "select");

			const res = await fetch("./tags.json");
			const json = await res.json();

			json.regions.forEach((e) => {
				document.getElementById(
					"select-region"
				).innerHTML += `<option value="${e}">${e.replaceAll(
					"_",
					" "
				)}</option>`;
			});

			json.meal.forEach((e) => {
				document.getElementById(
					"select-meal"
				).innerHTML += `<option value="${e}">${e.replaceAll(
					"_",
					" "
				)}</option>`;
			});

			json.options.forEach((e) => {
				const index = json.options.indexOf(e);
				const checkbox = `<input type="checkbox" value="${e}" id="options_${index}" />`;
				const label = `<label for="options_${index}">${e.replaceAll(
					"_",
					" "
				)}</label>`;
				document.getElementById("options").innerHTML += checkbox;
				document.getElementById("options").innerHTML += label;
				document.getElementById("options").innerHTML += "<br>";
			});
		};
	</script>
</html>
